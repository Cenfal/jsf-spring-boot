<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite">

<composite:interface componentType="taskReportModal">
	<composite:attribute name="selectorClass" />
	<composite:attribute name="hiddenNextRevision" />
	<composite:attribute name="hiddenDescription" />
	<composite:attribute name="generateChecklists" />
	<composite:attribute name="groupingParams" required="true"
		type="java.util.List" />
	<composite:attribute name="templates" required="true"
		type="java.util.Collection" />
	<composite:attribute name="action" required="true"
		method-signature="void action()" />
</composite:interface>

<composite:implementation>
	<div class="modal fade #{cc.attrs.selectorClass}" tabindex="-1"
		role="dialog" aria-labelledby="reportModalClass" aria-hidden="true"
		data-keyboard="false" data-backdrop="static">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<h:panelGroup id="content">
					<div class="modal-header"
						style="background-color: #DAE8EF; color: #003D50; border-bottom: 3px solid #C1D5DF">
						<button type="button" class="close" data-dismiss="modal">
							<i class="fa fa-times" />
						</button>
						<h4>
							<h:outputText value="Informe de tarea" style="font-weight:bold;" />
						</h4>
					</div>
					<div class="modal-body small-modal-body">
						<div class="container form-horizontal">
							<div class="col-md-8 col-xs-12">
								<div class="form-group">
									<span><p:outputLabel for="template"
											value="#{msg.TEMPLATE}" /> </span>
									<h:selectOneMenu id="template"
										value="#{cc.attrs.selectedTemplate}"
										styleClass="form-control input-sm">
										<f:selectItem itemValue="Selecciona una plantilla..."
											value="#{null}" noSelectOption="true" />
										<f:selectItems value="#{cc.attrs.templates}" />
									</h:selectOneMenu>
								</div>
								<div class="form-group">
									<div>
										<span> <label>#{msg.OPTIONS}</label>
										</span>
									</div>
									<div class="col-md-6 col-xs-6">
										<h:outputText value="Ocultar columna de Próxima Revisión " />
									</div>
									<div class="col-md-2 col-xs-2">
										<p:selectBooleanCheckbox
											value="#{cc.attrs.hiddenNextRevision}">
										</p:selectBooleanCheckbox>
									</div>
									<div class="col-md-6 col-xs-6">
										<h:outputText value="Ocultar columna de Descripción " />
									</div>
									<div class="col-md-2 col-xs-2">
										<p:selectBooleanCheckbox value="#{cc.attrs.hiddenDescription}">
										</p:selectBooleanCheckbox>
									</div>
									<div class="col-md-6 col-xs-6">
										<h:outputText value="Generar Checklists de las revisiones " />
									</div>
									<div class="col-md-2 col-xs-2">
										<p:selectBooleanCheckbox
											value="#{cc.attrs.generateChecklists}">
										</p:selectBooleanCheckbox>
									</div>
								</div>
								<div class="form-group">
									<span> <label>#{msg.GROUPINGS}</label>
									</span> <span> <h:commandLink action="#{cc.addGrouping}">
											<f:ajax render="content" execute="content" />
											<i class="fa fa-plus" />
											<h:outputText value="#{msg.OPERATIONS_ADD}" />
										</h:commandLink>
									</span>
								</div>
								<p:dataTable id="grouping_table" var="opt"
									value="#{cc.attrs.groupingParams}" rowIndexVar="rw"
									styleClass="hide-column-names"
									rendered="#{not empty cc.attrs.groupingParams}">
									<p:column>
										<div class="row">
											<div class="col-md-11">
												<div class="form-group"
													style="margin-left: 20px; margin-right: 20px;">
													<h:selectOneMenu styleClass="form-control input-sm"
														value="#{cc.attrs.groupingParams[rw]}"
														disabled="#{rw + 1 lt cc.attrs.groupingParams.size()}"
														required="true">
														<f:ajax event="select" render="content" />
														<f:selectItems value="#{cc.selectionOptions(rw)}" />
													</h:selectOneMenu>
												</div>
											</div>
										</div>
									</p:column>
									<p:column style="width:60px;">
										<h:commandLink class="button">
											<p:ajax update="grouping_table"
												listener="#{cc.removeGrouping(rw)}" />
											<i class="fa fa-times" />
										</h:commandLink>
									</p:column>
								</p:dataTable>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<p:commandButton value="#{msg.GENERATE}"
							action="#{cc.attrs.action}" styleClass="btn btn-default"
							onclick="$('.#{cc.attrs.selectorClass}').modal('hide');"
							ajax="false" />
					</div>
				</h:panelGroup>
			</div>
		</div>
	</div>
</composite:implementation>
</html>