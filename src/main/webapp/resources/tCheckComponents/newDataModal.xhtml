<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:body>
	<composite:interface>
		<composite:attribute name="selectorClass" required="true" />
		<composite:attribute name="head" />
		<composite:attribute name="name" required="true" />
		<composite:attribute name="headOrganizations" />
		<composite:attribute name="selectedOrganization" />
		<composite:attribute name="selectedTypology" />
		<composite:attribute name="hiddenEquipment" />
		<composite:attribute name="typologies" />
		<composite:attribute name="update" required="true" />
		<composite:attribute name="action" required="true"
			method-signature="void action()" />
	</composite:interface>
	<composite:implementation>
		<div class="modal fade #{cc.attrs.selectorClass}" tabindex="-1"
			role="dialog" aria-labelledby="newDataModal" aria-hidden="true"
			data-keyboard="false" data-backdrop="static">
			<div class="modal-dialog modal-lg">
				<div class="modal-content form-horizontal">
					<h:panelGroup id="content">
						<div class="modal-header"
							style="background-color: #DAE8EF; color: #003D50; border-bottom: 3px solid #C1D5DF">
							<button type="button" class="close" data-dismiss="modal">
								<i class="fa fa-times"></i>
							</button>
							<h4>
								<h:outputText value="#{cc.attrs.head}" style="font-weight:bold;" />
							</h4>
						</div>
						<div class="modal-body small-modal-body">
							<div class="form-group form-group-sm">
								<p:outputLabel for="org" value="#{msg.ORGANIZATION}"
									class="col-sm-3 control-label text-right" />
								<div class="col-sm-7">
									<p:selectOneMenu id="org" required="true"
										converter="omnifaces.SelectItemsConverter" filter="true"
										filterMatchMode="custom" filterFunction="skipAccentsContains"
										appendTo="@this" value="#{cc.attrs.selectedOrganization}"
										style="width:100%;">
										<f:selectItem itemLabel="" value="#{null}" />
										<f:selectItems value="#{cc.attrs.headOrganizations}"
											var="organization" itemValue="#{organization._Id}"
											itemLabel="#{organization._Name}" />
									</p:selectOneMenu>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<p:outputLabel for="name" value="#{msg.NAME}"
									class="col-sm-3 control-label text-right" />
								<div class="col-sm-7">
									<p:inputText id="name" styleClass="form-control"
										style="width:100%;" required="true" value="#{cc.attrs.name}" />
								</div>
							</div>
							<ui:fragment rendered="#{!cc.attrs.hiddenEquipment}">
								<div class="form-group form-group-sm">
									<p:outputLabel value="#{msg.REQUIRED_EQUIPMENT}"
										class="col-sm-3 control-label text-right" />
									<div class="col-sm-7">
										<p:selectOneMenu converter="omnifaces.SelectItemsConverter"
											filter="true" filterMatchMode="custom"
											filterFunction="skipAccentsContains" appendTo="@this"
											value="#{cc.attrs.selectedTypology}" style="width:100%;">
											<c:if test="#{!cc.attrs.typologies.isEmpty()}">
												<f:selectItem itemValue="#{null}"
													itemLabel="#{msg.WITHOUT_EQUIPMENT}" />
											</c:if>
											<c:if test="#{cc.attrs.typologies.isEmpty()}">
												<f:selectItem noSelectionOption="true"
													itemLabel="No existen equipamientos requeridos en la organizaciÃ³n" />
											</c:if>
											<f:selectItems value="#{cc.attrs.typologies}" var="typology"
												itemValue="#{typology._Id}" itemLabel="#{typology._Name}" />
										</p:selectOneMenu>
									</div>
								</div>
							</ui:fragment>
						</div>
						<div class="modal-footer">
							<p:commandButton validateClient="true" value="#{msg.SAVE}"
								action="#{cc.attrs.action}" styleClass="btn btn-default"
								oncomplete="if (args &amp;&amp; !args.validationFailed) $('.#{cc.attrs.selectorClass}').modal('hide');"
								update="#{cc.attrs.update}" />
						</div>
					</h:panelGroup>
				</div>
			</div>
		</div>
	</composite:implementation>
</h:body>
</html>