<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:tc="http://xmlns.jcp.org/jsf/composite/tCheckComponents">
<h:body>
	<composite:interface>
		<composite:attribute name="table" />
	</composite:interface>
	<composite:implementation>
		<div class="row margin">
			<div class="container">
				<div class="col-xs-12">
					<h:form>
						<p:dataTable var="history" value="#{cc.attrs.table._Value}"
							rows="10" paginator="true" emptyMessage="#{msg.NO_RECORDS_FOUND}"
							filteredValue="#{cc.attrs.table._FilteredValue}"
							widgetVar="historyDataTableWidget"
							paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
							tableStyleClass="table table-bordered table-striped table-hover table-condensed">
							<!-- TIPO MOVIMIENTO -->
							<!-- 							<p:column headerText="Movimiento" filterBy="#{history._Type}" -->
							<!-- 								filterMatchMode="in" styleClass="text-center"> -->
							<!-- 								<f:facet name="filter"> -->
							<!-- 									<p:selectCheckboxMenu label="#{msg.FILTER}" filter="true" -->
							<!-- 										onchange="PF('historyDataTableWidget').filter()" -->
							<!-- 										onToggleSelect="PF('historyDataTableWidget').filter()" -->
							<!-- 										widgetVar="move_filter_wdgt"> -->
							<!-- 										<p:ajax event="toggleSelect" -->
							<!-- 											onsuccess="filterAndMarkSelectMany('move_filter_wdgt')" /> -->
							<!-- 										<f:selectItem itemLabel="ENTRADA" itemValue="IN" /> -->
							<!-- 										<f:selectItem itemLabel="SALIDA" itemValue="OUT" /> -->
							<!-- 									</p:selectCheckboxMenu> -->
							<!-- 								</f:facet> -->
							<!-- 								<h:outputText rendered="#{history._Type == 'IN'}" -->
							<!-- 									value="ENTRADA" /> -->
							<!-- 								<h:outputText rendered="#{history._Type == 'OUT'}" -->
							<!-- 									value="SALIDA" /> -->
							<!-- 							</p:column> -->
							<!-- 							FECHA DEL MOVIMIENTO -->
							<!-- 							<p:column filterBy="#{history._Date}" -->
							<!-- 								filterFunction="#{viewUtils.filterByDate}" -->
							<!-- 								sortBy="#{history._Date}" filterMatchMode="contains" -->
							<!-- 								headerText="#{msg.WAREHOUSE_DATE}" styleClass="text-center"> -->
							<!-- 								<f:facet name="filter"> -->
							<!-- 									<p:inputText> -->
							<!-- 										<p:ajax event="keyup" oncomplete="filter()" delay="300" /> -->
							<!-- 									</p:inputText> -->
							<!-- 								</f:facet> -->
							<!-- 								<tc:dateFormat value="#{history._Date}" /> -->
							<!-- 							</p:column> -->

							<p:column headerText="Movimiento" styleClass="text-center">
								<h:outputText
									value="#{history._Type == 'IN' ? 'ENTRADA' : 'SALIDA'}" />
							</p:column>
							<p:column headerText="#{msg.WAREHOUSE_DATE}"
								styleClass="text-center">
								<h:form>
									<tc:dateFormat value="#{history._Date}" dateTime="true" />
								</h:form>
							</p:column>

							<!-- TIPO -->
							<p:column filterBy="#{history._Equipment._Type}"
								filterMatchMode="in" sortBy="#{history._Equipment._Type}"
								headerText="#{msg.TYPE}" styleClass="text-center">
								<f:facet name="filter">
									<p:selectCheckboxMenu label="#{msg.FILTER}"
										onchange="PF('historyDataTableWidget').filter()"
										onToggleSelect="PF('historyDataTableWidget').filter()"
										filter="true" filterMatchMode="custom"
										filterFunction="skipAccentsContains"
										widgetVar="type_filter_wdgt">
										<p:ajax onsuccess="markSelectMany(PF('type_filter_wdgt'));" />
										<p:ajax event="toggleSelect"
											onsuccess="PF('historyDataTableWidget').filter(); markSelectMany(PF('type_filter_wdgt'));" />
										<f:selectItems
											value="#{facesUtils.propertyDistinctValuesSelection(cc.attrs.table._Value,'_Equipment._Type')}" />
									</p:selectCheckboxMenu>
								</f:facet>
								<h:outputText value="#{history._Equipment._Type}" />
							</p:column>
							<!-- MARCA -->
							<p:column filterBy="#{history._Equipment._Brand}"
								filterMatchMode="in" sortBy="#{history._Equipment._Brand}"
								headerText="#{msg.BRAND}" styleClass="text-center">
								<f:facet name="filter">
									<p:selectCheckboxMenu label="#{msg.FILTER}"
										onchange="PF('historyDataTableWidget').filter()"
										onToggleSelect="PF('historyDataTableWidget').filter()"
										filter="true" filterMatchMode="custom"
										filterFunction="skipAccentsContains"
										widgetVar="brand_filter_wdgt">
										<p:ajax onsuccess="markSelectMany(PF('brand_filter_wdgt'));" />
										<p:ajax event="toggleSelect"
											onsuccess="PF('historyDataTableWidget').filter(); markSelectMany(PF('brand_filter_wdgt'));" />
										<f:selectItems
											value="#{facesUtils.propertyDistinctValuesSelection(cc.attrs.table._Value,'_Equipment._Brand')}" />
									</p:selectCheckboxMenu>
								</f:facet>
								<h:outputText value="#{history._Equipment._Brand}" />
							</p:column>
							<!-- MODELO -->
							<p:column filterBy="#{history._Equipment._Model}"
								filterMatchMode="in" sortBy="#{history._Equipment._Model}"
								headerText="#{msg.MODEL}" styleClass="text-center">
								<f:facet name="filter">
									<p:selectCheckboxMenu label="#{msg.FILTER}"
										onchange="PF('historyDataTableWidget').filter()"
										onToggleSelect="PF('historyDataTableWidget').filter()"
										filter="true" filterMatchMode="custom"
										filterFunction="skipAccentsContains"
										widgetVar="model_filter_wdgt">
										<p:ajax onsuccess="markSelectMany(PF('model_filter_wdgt'));" />
										<p:ajax event="toggleSelect"
											onsuccess="PF('historyDataTableWidget').filter(); markSelectMany(PF('model_filter_wdgt'));" />
										<f:selectItems
											value="#{facesUtils.propertyDistinctValuesSelection(cc.attrs.table._Value,'_Equipment._Model')}" />
									</p:selectCheckboxMenu>
								</f:facet>
								<h:outputText value="#{history._Equipment._Model}" />
							</p:column>
							<!-- CODIGO -->
							<p:column filterBy="#{history._Equipment._Code}"
								filterMatchMode="contains"
								filterFunction="#{viewUtils.skipAccentsContains}"
								headerText="#{msg.CODE}" styleClass="text-center"
								sortBy="#{history._Equipment._Code}">
								<f:facet name="filter">
									<p:inputText onkeyup="PF('historyDataTableWidget').filter();"
										style="width: 100%;" />
								</f:facet>
								<h:outputText value="#{history._Equipment._Code}" />
							</p:column>
							<!-- NÂº SERIE -->
							<p:column filterBy="#{history._Equipment._SerialNumber}"
								filterMatchMode="in"
								sortBy="#{history._Equipment._SerialNumber}"
								headerText="#{msg.SERIAL_NUMBER}" styleClass="text-center">
								<f:facet name="filter">
									<p:selectCheckboxMenu label="#{msg.FILTER}"
										onchange="PF('historyDataTableWidget').filter()"
										onToggleSelect="PF('historyDataTableWidget').filter()"
										filter="true" filterMatchMode="custom"
										filterFunction="skipAccentsContains"
										widgetVar="serial_filter_wdgt">
										<p:ajax onsuccess="markSelectMany(PF('serial_filter_wdgt'));" />
										<p:ajax event="toggleSelect"
											onsuccess="PF('historyDataTableWidget').filter(); markSelectMany(PF('serial_filter_wdgt'));" />
										<f:selectItems
											value="#{facesUtils.propertyDistinctValuesSelection(cc.attrs.table._Value,'_Equipment._SerialNumber')}" />
									</p:selectCheckboxMenu>
								</f:facet>
								<h:outputText value="#{history._Equipment._SerialNumber}" />
							</p:column>
						</p:dataTable>
					</h:form>
				</div>
			</div>
		</div>
	</composite:implementation>
</h:body>
</html>