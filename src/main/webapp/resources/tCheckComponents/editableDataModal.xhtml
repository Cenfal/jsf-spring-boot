<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite">

<composite:interface>
	<composite:attribute name="selectorClass" required="true" />
	<composite:attribute name="head" />
	<composite:attribute name="client" />
	<composite:attribute name="name" />
	<composite:attribute name="address" />
	<composite:attribute name="showAddress" />
	<composite:attribute name="task" />
	<composite:attribute name="selectedFamily" />
	<composite:attribute name="headFamilies" />
	<composite:attribute name="companyName" />
	<composite:attribute name="taxCode" />
	<composite:attribute name="update" required="true" />
	<composite:attribute name="action" required="true"
		method-signature="void action()" />
</composite:interface>

<composite:implementation>
	<div class="modal fade #{cc.attrs.selectorClass}" tabindex="-1"
		role="dialog" aria-labelledby="clientDataModal" aria-hidden="true"
		data-keyboard="false" data-backdrop="static">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<h:panelGroup id="content">
					<div class="modal-header"
						style="background-color: #DAE8EF; color: #003D50; border-bottom: 3px solid #C1D5DF">
						<button type="button" class="close" data-dismiss="modal">
							<i class="fa fa-times" />
						</button>
						<h4>
							<h:outputText value="#{cc.attrs.head}" style="font-weight:bold;" />
						</h4>
					</div>
					<ui:fragment rendered="#{!cc.attrs.task and !cc.attrs.client}">
						<div class="modal-body small-modal-body">
							<div class="form-group form-group-sm">
								<p:outputLabel value="#{msg.FAMILY}"
									styleClass="col-sm-3 control-label text-right" />

								<div class="col-sm-7">
									<p:selectOneMenu converter="omnifaces.SelectItemsConverter"
										filter="true" filterMatchMode="custom"
										filterFunction="skipAccentsContains" appendTo="@this"
										value="#{cc.attrs.selectedFamily}" style="width:100%;">
										<f:selectItem itemValue="#{null}" itemLabel="Sin familia" />
										<f:selectItems value="#{cc.attrs.headFamilies}" var="family"
											itemValue="#{family}" itemLabel="#{family._Name}" />
									</p:selectOneMenu>
								</div>
							</div>
						</div>
					</ui:fragment>
					<div class="modal-body small-modal-body">
						<div class="form-group form-group-sm" style="margin-bottom: 50px;">
							<p:outputLabel for="name_field" value="#{msg.NAME}"
								styleClass="col-sm-3 control-label text-right" />

							<div class="col-sm-7">
								<p:inputText id="name_field" styleClass="form-control"
									style="width:100%;" required="true" value="#{cc.attrs.name}" />
							</div>
						</div>
					</div>
					<ui:fragment rendered="#{cc.attrs.client and cc.attrs.showAddress}">
						<div class="modal-body small-modal-body">
							<div class="form-group form-group-sm"
								style="margin-bottom: 25px;">
								<p:outputLabel value="Razón social"
									styleClass="col-sm-3 control-label text-right" />
								<div class="col-sm-7">
									<p:inputText styleClass="form-control" style="width:100%;"
										value="#{cc.attrs.companyName}" />
								</div>
							</div>
						</div>
						<div class="modal-body small-modal-body">
							<div class="form-group form-group-sm"
								style="margin-bottom: 25px;">
								<p:outputLabel value="Dirección"
									styleClass="col-sm-3 control-label text-right" />
								<div class="col-sm-7">
									<p:inputText styleClass="form-control" style="width:100%;"
										value="#{cc.attrs.address}" />
								</div>
							</div>
						</div>
						<div class="modal-body small-modal-body">
							<div class="form-group form-group-sm"
								style="margin-bottom: 25px;">
								<p:outputLabel value="CIF"
									styleClass="col-sm-3 control-label text-right" />
								<div class="col-sm-7">
									<p:inputText styleClass="form-control" style="width:100%;"
										value="#{cc.attrs.taxCode}" />
								</div>
							</div>
						</div>
					</ui:fragment>
					<ui:fragment rendered="#{cc.attrs.task}">
						<div class="modal-body small-modal-body">
							<div class="form-group form-group-sm"
								style="margin-bottom: 100px;">
								<p:outputLabel for="date_field" value="#{msg.INIT_DATE} "
									styleClass="col-sm-3 control-label text-right" />
								<p:calendar id="date_field" locale="es" showWeek="true"
									navigator="true" value="#{cc.attrs.date}"
									styleClass="col-sm-3 control-label text-right"
									style="width:43%; margin-right:20px;" required="true">
									<p:ajax event="dateSelect" />
								</p:calendar>
							</div>
						</div>
					</ui:fragment>
					<div class="modal-footer">
						<p:commandButton value="Guardar" action="#{cc.attrs.action}"
							styleClass="btn btn-default" update="#{cc.attrs.update}"
							oncomplete="if (args &amp;&amp; !args.validationFailed) $('.#{cc.attrs.selectorClass}').modal('hide');" />
					</div>
				</h:panelGroup>
			</div>
		</div>
	</div>
</composite:implementation>
</html>